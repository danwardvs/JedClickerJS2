function location_clicked(e,t,i,a){return mouse_x>e&&mouse_x<t&&mouse_y>i&&mouse_y<a&&(1&mouse_b||2&mouse_b)?!0:!1}function location_right_clicked(e,t,i,a){return mouse_x>e&&mouse_x<t&&mouse_y>i&&mouse_y<a&&4&mouse_b?!0:!1}function draw(){var e="JedCoins: "+money;textout(canvas,font,e,5,35,40,makecol(0,0,0));var t="JC/S: "+money_per_second,a="JC/C: "+money_per_click;for(textout(canvas,font,t,5,65,30,makecol(0,0,0)),textout(canvas,font,a,5,95,30,makecol(0,0,0)),location_clicked(10,410,190,600)||location_right_clicked(10,410,190,600)||draw_sprite(canvas,coin,10,190),(location_clicked(10,410,190,600)||location_right_clicked(10,410,190,600))&&stretch_sprite(canvas,coin,30,210,360,360),slave.draw(),press.draw(),workstation.draw(),mine.draw(),clone.draw(),forge.draw(),jmocrop.draw(),powerplant.draw(),village.draw(),spacestation.draw(),moon.draw(),jedos.draw(),teleporter.draw(),magnet.draw(),jedsalt.draw(),robot.draw(),darkcoin.draw(),starship.draw(),planet.draw(),jed.draw(),blackhole.draw(),cookie.draw(),i=0;i<money_particle_array.length;++i)money_particle_array[i].draw()}function update(){for(second_timer++,second_timer>60&&(second_timer=0,money+=money_per_second,money_per_second>0&&money_particle_array.push(new money_particle(Math.floor(340*Math.random()+31),Math.floor(270*Math.random()+231),money_per_second))),i=0;i<money_particle_array.length;++i)0==money_particle_array[i].update()&&money_particle_array.splice(i,1);key[KEY_I]&&(money+=1e4),key[KEY_O]&&(money=1e4*money),!location_clicked(10,410,190,600)&&!location_right_clicked(10,410,190,600)||coin_clicked||(coin_clicked=!0,money+=money_per_click,money_particle_array.push(new money_particle(Math.floor(340*Math.random()+31),Math.floor(270*Math.random()+231),money_per_click)),play_sample(sound_click)),1&!mouse_b&&(coin_clicked=!1),slave.update(),press.update(),workstation.update(),mine.update(),clone.update(),forge.update(),jmocrop.update(),powerplant.update(),village.update(),spacestation.update(),moon.update(),jedos.update(),teleporter.update(),magnet.update(),jedsalt.update(),robot.update(),darkcoin.update(),starship.update(),planet.update(),blackhole.update(),jed.update(),cookie.update(),mouse_z!=old_mouse_z&&(scroll_step=0),old_mouse_z=mouse_z}function setup(){slave.set_image("images/slave.png"),workstation.set_image("images/workstation.png"),mine.set_image("images/mine.png"),clone.set_image("images/jedclone.png"),press.set_image("images/press.png"),forge.set_image("images/forge.png"),powerplant.set_image("images/powerplant.png"),village.set_image("images/village.png"),spacestation.set_image("images/spacestation.png"),moon.set_image("images/moon.png"),jedos.set_image("images/jedos.png"),teleporter.set_image("images/teleporter.png"),magnet.set_image("images/magnet.png"),jedsalt.set_image("images/jedsalt.png"),jmocrop.set_image("images/jmocrop.png"),robot.set_image("images/robot.png"),darkcoin.set_image("images/darkcoin.png"),starship.set_image("images/starship.png"),planet.set_image("images/planet.png"),blackhole.set_image("images/blackhole.png"),jed.set_image("images/jed.png"),cookie.set_image("images/cookie.png"),coin=load_bmp("images/coin.png"),sound_click=load_sample("audio/sound_click.mp3"),sound_buy=load_sample("audio/sound_buy.mp3")}function main(){return enable_debug("debug"),allegro_init_all("game_canvas",1e3,600),setup(),ready(function(){loop(function(){clear_to_color(canvas,makecol(255,255,255)),update(),draw()},BPS_TO_TIMER(60))}),0}var x=100,y=100,coin,money=0,money_per_click=1,money_per_second=0,bobX=600,bobY=600,flip=0,angle=0,h=25,w=25,COINS_PER_CLICK=0,COINS_PER_SECOND=1,slave_y=0,old_mouse_z=0,second_timer=0,coin_clicked=!1,slabo_26,sound_click,sound_buy,money_particle_array=[],money_particle=function(e,t,i){this.x=e,this.y=t,this.money=i};money_particle.prototype.draw=function(){textout(canvas,font,"$"+this.money,this.x,this.y,10,makecol(0,200,0))},money_particle.prototype.update=function(){return this.y--,this.y<0?!1:!0};var item=function(e,t,i,a,o,s){this.name=s,this.value=o,this.x=e,this.y=t,this.price=a,this.money_type=i,this.amount=0,this.step=0,this.scroll_step=0,this.image=0};item.prototype.draw=function(){for(rect(canvas,this.x+45,this.y,SCREEN_W-1,this.y+40,makecol(0,0,0)),("Jed"!=this.name||"Jed"==this.name&&0==this.amount)&&(money<this.price?(rectfill(canvas,this.x,this.y,this.x+45,this.y+40,makecol(255,0,0)),textout_right(canvas,font,this.price,this.x-10,this.y+25,16,makecol(0,0,0))):(rectfill(canvas,this.x,this.y,this.x+45,this.y+40,makecol(0,255,0)),textout(canvas,font,"Buy",this.x+12,this.y+24,15,makecol(0,0,0),"Buy"),textout_right(canvas,font,this.price,this.x-10,this.y+25,16,makecol(0,0,0)))),"Jed"==this.name&&0!=this.amount&&rectfill(canvas,this.x,this.y,this.x+45,this.y+40,makecol(100,100,255)),rect(canvas,this.x,this.y,this.x+45,this.y+40,makecol(0,0,0)),this.money_type==COINS_PER_SECOND&&(coin_string=this.value+" JC/S",textout_right(canvas,font,coin_string,SCREEN_W-25,this.y+15,12,makecol(0,100,0))),this.money_type==COINS_PER_CLICK&&(coin_string=this.value+" JC/C",textout_right(canvas,font,coin_string,SCREEN_W-25,this.y+15,12,makecol(200,0,0))),i=0;i<this.amount;i++)draw_sprite(canvas,this.image,this.x+50+25*i,this.y+10);textout(canvas,font,this.name+"s: "+this.amount,this.x+50,this.y+15,12,makecol(0,0,0))},item.prototype.update=function(){if("Slave"==this.name&&(slave_y=this.y),this.step++,mouse_z<old_mouse_z&&0>slave_y&&(this.y+=40),mouse_z>old_mouse_z&&slave_y>-280&&(this.y-=40),("Jed"==this.name&&0==this.amount||"Jed"!=this.name)&&(location_clicked(this.x,this.x+45,this.y,this.y+40)&&this.step>10&&(money>=this.price&&("Jed"==this.name&&alert("You win!"),play_sample(sound_buy),money-=this.price,this.amount++,0==this.money_type&&(money_per_click+=this.value),1==this.money_type&&(money_per_second+=this.value),this.price=Math.round(1.25*this.price)),this.step=0),location_right_clicked(this.x,this.x+45,this.y,this.y+40)&&money>=this.price)){"Jed"==this.name&&alert("You win!"),play_sample(sound_buy),money-=this.price,this.amount++,0==this.money_type&&(money_per_click+=this.value),1==this.money_type&&(money_per_second+=this.value);var e=1.25*this.price;this.price=Math.round(e)}},item.prototype.set_image=function(e){this.image=load_bmp(e)};var slave=new item(550,0,COINS_PER_SECOND,100,2,"Slave"),press=new item(550,40,COINS_PER_CLICK,100,2,"JedCoin Press"),workstation=new item(550,80,COINS_PER_SECOND,750,10,"Workstation"),mine=new item(550,120,COINS_PER_SECOND,2e3,25,"JedCoin Mine"),forge=new item(550,160,COINS_PER_SECOND,2e4,100,"JedCoin Forge"),jmocrop=new item(550,200,COINS_PER_SECOND,35e3,300,"Jedetically Modified Crop"),clone=new item(550,240,COINS_PER_CLICK,4e4,100,"Jed Clone"),powerplant=new item(550,280,COINS_PER_SECOND,5e4,750,"Nuclear Power Plant"),village=new item(550,320,COINS_PER_SECOND,1e5,2e3,"Village"),spacestation=new item(550,360,COINS_PER_SECOND,125e4,15e3,"Space Station"),moon=new item(550,400,COINS_PER_SECOND,2e6,5e4,"Moon"),jedos=new item(550,440,COINS_PER_CLICK,75e5,5e3,"JeDOS AI"),teleporter=new item(550,480,COINS_PER_SECOND,1e8,5e5,"Space Teleporter"),magnet=new item(550,520,COINS_PER_CLICK,15e7,25e3,"Electromagnetic Coin Magnifier"),robot=new item(550,560,COINS_PER_SECOND,5e8,1e6,"Killer Robot"),darkcoin=new item(550,600,COINS_PER_SECOND,1e9,3e6,"Dark Matter Coin"),starship=new item(550,640,COINS_PER_SECOND,25e8,6e6,"Starship Fleet"),planet=new item(550,680,COINS_PER_SECOND,75e8,2e7,"Distant Inhabitable Planet"),blackhole=new item(550,720,COINS_PER_SECOND,1e10,8e7,"Black Hole"),jedsalt=new item(550,760,COINS_PER_SECOND,15e10,2e8,"Jed Salt"),jed=new item(550,800,COINS_PER_SECOND,1e14,3e10,"Jed"),cookie=new item(550,840,COINS_PER_SECOND,7,0,"Depressed Cookie");END_OF_MAIN();